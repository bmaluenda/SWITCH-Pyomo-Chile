
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module switch_mod.timescales</title>
<meta charset="utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong><a href="switch_mod.html"><font color="#ffffff">switch_mod</font></a>.timescales</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/Users/siah/src/switch/switch_mod/timescales.py">/Users/siah/src/switch/switch_mod/timescales.py</a></font></td></tr></table>
    <p><tt>Defines&nbsp;timescales&nbsp;for&nbsp;investment&nbsp;and&nbsp;dispatch&nbsp;for&nbsp;the&nbsp;SWITCH-Pyomo&nbsp;model.<br>
&nbsp;<br>
SYNOPSIS<br>
&gt;&gt;&gt;&nbsp;from&nbsp;switch_mod.utilities&nbsp;import&nbsp;define_AbstractModel<br>
&gt;&gt;&gt;&nbsp;model&nbsp;=&nbsp;define_AbstractModel('timescales')<br>
&gt;&gt;&gt;&nbsp;instance&nbsp;=&nbsp;model.<a href="#-load_inputs">load_inputs</a>(inputs_dir='test_dat')</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="pyomo.core.base.html">pyomo.core.base</a><br>
<a href="pyomo.core.beta.html">pyomo.core.beta</a><br>
</td><td width="25%" valign=top><a href="pyomo.core.data.html">pyomo.core.data</a><br>
<a href="os.html">os</a><br>
</td><td width="25%" valign=top><a href="pyomo.core.preprocess.html">pyomo.core.preprocess</a><br>
<a href="pyomo.html">pyomo</a><br>
</td><td width="25%" valign=top></td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-define_components"><strong>define_components</strong></a>(mod)</dt><dd><tt>Augments&nbsp;a&nbsp;Pyomo&nbsp;abstract&nbsp;model&nbsp;object&nbsp;with&nbsp;sets&nbsp;and&nbsp;parameters&nbsp;that<br>
describe&nbsp;timescales&nbsp;of&nbsp;investment&nbsp;and&nbsp;dispatch&nbsp;decisions.<br>
&nbsp;<br>
PERIODS&nbsp;is&nbsp;the&nbsp;set&nbsp;of&nbsp;multi-year&nbsp;periods&nbsp;describing&nbsp;the&nbsp;timescale&nbsp;of<br>
investment&nbsp;decisions.&nbsp;The&nbsp;following&nbsp;parameters&nbsp;describe&nbsp;attributes<br>
of&nbsp;a&nbsp;period.<br>
&nbsp;<br>
period_start[p]:&nbsp;The&nbsp;first&nbsp;complete&nbsp;year&nbsp;of&nbsp;an&nbsp;investment&nbsp;period.<br>
&nbsp;<br>
period_end[p]:&nbsp;The&nbsp;last&nbsp;complete&nbsp;year&nbsp;of&nbsp;an&nbsp;investment&nbsp;period.<br>
&nbsp;<br>
period_length_years[p]:&nbsp;The&nbsp;number&nbsp;of&nbsp;years&nbsp;in&nbsp;an&nbsp;investment<br>
period;&nbsp;derived&nbsp;from&nbsp;period_start&nbsp;and&nbsp;period_end.<br>
&nbsp;<br>
period_length_hours[p]:&nbsp;The&nbsp;number&nbsp;of&nbsp;hours&nbsp;in&nbsp;an&nbsp;investment<br>
period;&nbsp;derived&nbsp;from&nbsp;period_length_years&nbsp;with&nbsp;an&nbsp;average&nbsp;of&nbsp;&nbsp;&nbsp;8766<br>
hours&nbsp;per&nbsp;year.<br>
&nbsp;<br>
TIMESERIES&nbsp;denote&nbsp;blocks&nbsp;of&nbsp;consecutive&nbsp;timepoints&nbsp;within&nbsp;a&nbsp;period.<br>
An&nbsp;individual&nbsp;time&nbsp;series&nbsp;could&nbsp;represent&nbsp;a&nbsp;single&nbsp;day,&nbsp;a&nbsp;week,&nbsp;a<br>
month&nbsp;or&nbsp;an&nbsp;entire&nbsp;year.&nbsp;This&nbsp;replaces&nbsp;the&nbsp;DATE&nbsp;construct&nbsp;in&nbsp;the&nbsp;old<br>
SWITCH&nbsp;code&nbsp;and&nbsp;is&nbsp;meant&nbsp;to&nbsp;be&nbsp;more&nbsp;versatile.&nbsp;The&nbsp;following&nbsp;parameters<br>
describe&nbsp;attributes&nbsp;of&nbsp;a&nbsp;timeseries.<br>
&nbsp;<br>
ts_period[ts]:&nbsp;The&nbsp;period&nbsp;a&nbsp;timeseries&nbsp;falls&nbsp;in.<br>
&nbsp;<br>
ts_num_tps[ts]:&nbsp;The&nbsp;number&nbsp;of&nbsp;timepoints&nbsp;in&nbsp;a&nbsp;timeseries.<br>
&nbsp;<br>
ts_duration_of_tp[ts]:&nbsp;The&nbsp;duration&nbsp;in&nbsp;hours&nbsp;of&nbsp;each&nbsp;timepoint<br>
within&nbsp;a&nbsp;timeseries.&nbsp;This&nbsp;is&nbsp;used&nbsp;for&nbsp;calculations&nbsp;that&nbsp;ensure&nbsp;a<br>
storage&nbsp;project&nbsp;has&nbsp;a&nbsp;sufficient&nbsp;energy&nbsp;charge&nbsp;when&nbsp;it&nbsp;is<br>
dedicated&nbsp;to&nbsp;providing&nbsp;reserves.<br>
&nbsp;<br>
ts_duration_hrs[ts]:&nbsp;The&nbsp;total&nbsp;duration&nbsp;of&nbsp;a&nbsp;timeseries&nbsp;in&nbsp;hours.<br>
&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;ts_duration_of_tp[ts]&nbsp;*&nbsp;ts_num_tps[ts]<br>
&nbsp;<br>
ts_scale_to_period[ts]:&nbsp;The&nbsp;number&nbsp;of&nbsp;times&nbsp;this&nbsp;representative<br>
timeseries&nbsp;is&nbsp;expected&nbsp;to&nbsp;occur&nbsp;in&nbsp;a&nbsp;period.&nbsp;Used&nbsp;as&nbsp;a&nbsp;scaling<br>
factor&nbsp;&nbsp;&nbsp;to&nbsp;adjust&nbsp;the&nbsp;weight&nbsp;from&nbsp;ts_duration_hrs&nbsp;up&nbsp;to&nbsp;a&nbsp;period.<br>
See&nbsp;examples&nbsp;below.<br>
&nbsp;<br>
ts_scale_to_year[ts]:&nbsp;The&nbsp;number&nbsp;of&nbsp;times&nbsp;this&nbsp;representative<br>
timeseries&nbsp;is&nbsp;expected&nbsp;to&nbsp;occur&nbsp;in&nbsp;a&nbsp;year.<br>
&nbsp;<br>
TIMEPOINTS&nbsp;describe&nbsp;unique&nbsp;timepoints&nbsp;within&nbsp;a&nbsp;time&nbsp;series&nbsp;and<br>
typically&nbsp;index&nbsp;exogenous&nbsp;variables&nbsp;such&nbsp;as&nbsp;electricity&nbsp;demand&nbsp;and<br>
variable&nbsp;renewable&nbsp;energy&nbsp;output.&nbsp;The&nbsp;duration&nbsp;of&nbsp;a&nbsp;timepoint&nbsp;is<br>
typically&nbsp;on&nbsp;the&nbsp;order&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;hours,&nbsp;so&nbsp;costs&nbsp;associated<br>
with&nbsp;timepoints&nbsp;are&nbsp;specified&nbsp;in&nbsp;hourly&nbsp;units,&nbsp;and&nbsp;the&nbsp;weights&nbsp;of<br>
timepoints&nbsp;are&nbsp;specified&nbsp;in&nbsp;units&nbsp;of&nbsp;hours.&nbsp;TIMEPOINTS&nbsp;replaces&nbsp;the<br>
HOURS&nbsp;construct&nbsp;in&nbsp;some&nbsp;of&nbsp;the&nbsp;old&nbsp;versions&nbsp;of&nbsp;SWITCH.&nbsp;The&nbsp;order&nbsp;of<br>
timepoints&nbsp;is&nbsp;provided&nbsp;by&nbsp;their&nbsp;ordering&nbsp;in&nbsp;their&nbsp;input&nbsp;file<br>
according&nbsp;to&nbsp;the&nbsp;standard&nbsp;Pyomo/AMPL&nbsp;conventions.&nbsp;To&nbsp;maintain<br>
sanity,&nbsp;we&nbsp;recommend&nbsp;sorting&nbsp;your&nbsp;input&nbsp;file&nbsp;by&nbsp;timestamp.&nbsp;Each<br>
timepoint&nbsp;within&nbsp;a&nbsp;series&nbsp;has&nbsp;the&nbsp;same&nbsp;duration&nbsp;to&nbsp;simplify<br>
statistical&nbsp;calculations.&nbsp;The&nbsp;following&nbsp;parameters&nbsp;describe<br>
attributes&nbsp;of&nbsp;timepoints.<br>
&nbsp;<br>
tp_weight[t]:&nbsp;The&nbsp;weight&nbsp;of&nbsp;a&nbsp;timepoint&nbsp;within&nbsp;an&nbsp;investment<br>
period&nbsp;in&nbsp;units&nbsp;of&nbsp;hours&nbsp;per&nbsp;period.<br>
&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;ts_duration_of_tp[ts]&nbsp;*&nbsp;ts_scale_to_period[ts]<br>
&nbsp;<br>
tp_weight_in_year[t]:&nbsp;The&nbsp;weight&nbsp;of&nbsp;a&nbsp;timepoint&nbsp;within&nbsp;a&nbsp;year<br>
in&nbsp;units&nbsp;of&nbsp;hours&nbsp;per&nbsp;year.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;tp_weight[t]&nbsp;/&nbsp;period_length_years[p]<br>
&nbsp;<br>
tp_timestamp[t]:&nbsp;The&nbsp;timestamp&nbsp;of&nbsp;the&nbsp;future&nbsp;time&nbsp;represented&nbsp;by<br>
this&nbsp;timepoint.&nbsp;This&nbsp;is&nbsp;only&nbsp;used&nbsp;as&nbsp;a&nbsp;label&nbsp;and&nbsp;can&nbsp;follow&nbsp;any<br>
format&nbsp;you&nbsp;wish.&nbsp;Although&nbsp;we&nbsp;highly&nbsp;advise&nbsp;populating&nbsp;this<br>
parameter,&nbsp;it&nbsp;is&nbsp;optional&nbsp;and&nbsp;will&nbsp;default&nbsp;to&nbsp;t.<br>
&nbsp;<br>
tp_ts[t]:&nbsp;This&nbsp;timepoint's&nbsp;timeseries.<br>
&nbsp;<br>
tp_period[t]:&nbsp;This&nbsp;timepoint's&nbsp;period.<br>
&nbsp;<br>
tp_duration_hrs[t]:&nbsp;The&nbsp;duration&nbsp;of&nbsp;this&nbsp;timepoint&nbsp;in&nbsp;hours,<br>
taken&nbsp;directly&nbsp;from&nbsp;the&nbsp;timeseries&nbsp;specification&nbsp;ts_duration_of_tp.<br>
&nbsp;<br>
tp_previous[t]:&nbsp;The&nbsp;timepoint&nbsp;that&nbsp;is&nbsp;previous&nbsp;to&nbsp;t&nbsp;in&nbsp;its<br>
timeseries.&nbsp;Timeseries&nbsp;are&nbsp;treated&nbsp;circularly,&nbsp;so&nbsp;previous&nbsp;of&nbsp;the<br>
first&nbsp;timepoint&nbsp;will&nbsp;be&nbsp;the&nbsp;last&nbsp;timepoint&nbsp;in&nbsp;the&nbsp;series&nbsp;instead&nbsp;of<br>
being&nbsp;None&nbsp;or&nbsp;invalid.&nbsp;In&nbsp;the&nbsp;degenerate&nbsp;case&nbsp;of&nbsp;a&nbsp;timeseries&nbsp;with&nbsp;a<br>
single&nbsp;timepoint,&nbsp;tp_previous[t]&nbsp;will&nbsp;be&nbsp;t.<br>
&nbsp;<br>
PERIOD_TPS[period]:&nbsp;The&nbsp;set&nbsp;of&nbsp;timepoints&nbsp;in&nbsp;a&nbsp;period.<br>
&nbsp;<br>
TS_TPS[timeseries]:&nbsp;The&nbsp;ordered&nbsp;set&nbsp;of&nbsp;timepoints&nbsp;in&nbsp;a&nbsp;timeseries.<br>
&nbsp;<br>
Data&nbsp;validity&nbsp;check:<br>
Currently,&nbsp;the&nbsp;sum&nbsp;of&nbsp;tp_weight&nbsp;for&nbsp;all&nbsp;timepoints&nbsp;in&nbsp;a&nbsp;period<br>
must&nbsp;be&nbsp;within&nbsp;1&nbsp;percent&nbsp;of&nbsp;the&nbsp;expected&nbsp;length&nbsp;of&nbsp;the&nbsp;investment<br>
period&nbsp;period.&nbsp;Period&nbsp;length&nbsp;is&nbsp;calculated&nbsp;by&nbsp;multiplying&nbsp;the<br>
average&nbsp;number&nbsp;of&nbsp;hours&nbsp;in&nbsp;a&nbsp;year&nbsp;rounded&nbsp;to&nbsp;the&nbsp;nearest&nbsp;integer<br>
(8766)&nbsp;by&nbsp;the&nbsp;number&nbsp;of&nbsp;years&nbsp;per&nbsp;period.&nbsp;I&nbsp;implemented&nbsp;this&nbsp;rule<br>
because&nbsp;these&nbsp;are&nbsp;used&nbsp;as&nbsp;weights&nbsp;for&nbsp;variable&nbsp;costs&nbsp;of&nbsp;dispatch&nbsp;and<br>
operations,&nbsp;and&nbsp;I&nbsp;think&nbsp;it&nbsp;is&nbsp;important&nbsp;for&nbsp;those&nbsp;costs&nbsp;to&nbsp;reflect<br>
those&nbsp;expected&nbsp;costs&nbsp;over&nbsp;an&nbsp;entire&nbsp;period&nbsp;or&nbsp;else&nbsp;the&nbsp;levelized<br>
costs&nbsp;of&nbsp;power&nbsp;that&nbsp;is&nbsp;being&nbsp;optimized&nbsp;will&nbsp;not&nbsp;make&nbsp;sense.<br>
&nbsp;<br>
&nbsp;<br>
EXAMPLES<br>
&nbsp;<br>
These&nbsp;hypothetical&nbsp;examples&nbsp;illustrate&nbsp;differential&nbsp;weighting&nbsp;of<br>
timepoints&nbsp;and&nbsp;timeseries.&nbsp;Each&nbsp;timepoint&nbsp;adds&nbsp;additional<br>
computational&nbsp;complexity,&nbsp;and&nbsp;you&nbsp;may&nbsp;wish&nbsp;to&nbsp;reduce&nbsp;the&nbsp;time<br>
resolution&nbsp;in&nbsp;low-stress&nbsp;periods&nbsp;and&nbsp;increase&nbsp;the&nbsp;time&nbsp;resolution&nbsp;in<br>
high-stress&nbsp;periods.&nbsp;These&nbsp;examples&nbsp;are&nbsp;probably&nbsp;not&nbsp;the&nbsp;resolutions<br>
you&nbsp;would&nbsp;choose,&nbsp;but&nbsp;are&nbsp;meant&nbsp;to&nbsp;illustrate&nbsp;calculations.&nbsp;When<br>
calculating&nbsp;these&nbsp;for&nbsp;your&nbsp;own&nbsp;models,&nbsp;you&nbsp;may&nbsp;check&nbsp;your<br>
calculations&nbsp;by&nbsp;adding&nbsp;all&nbsp;of&nbsp;the&nbsp;tp_weights&nbsp;in&nbsp;a&nbsp;period&nbsp;and<br>
ensuring&nbsp;that&nbsp;it&nbsp;is&nbsp;equal&nbsp;to&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;period&nbsp;in&nbsp;years&nbsp;times<br>
8766,&nbsp;the&nbsp;average&nbsp;number&nbsp;of&nbsp;hours&nbsp;per&nbsp;year.&nbsp;That&nbsp;weighting&nbsp;ensures<br>
an&nbsp;accurate&nbsp;depiction&nbsp;of&nbsp;variable&nbsp;costs&nbsp;and&nbsp;dispatch&nbsp;relative&nbsp;to<br>
fixed&nbsp;costs&nbsp;such&nbsp;as&nbsp;capital.&nbsp;This&nbsp;check&nbsp;is&nbsp;also&nbsp;performed&nbsp;when<br>
loading&nbsp;a&nbsp;model&nbsp;and&nbsp;will&nbsp;generate&nbsp;an&nbsp;error&nbsp;if&nbsp;the&nbsp;sum&nbsp;of&nbsp;weights&nbsp;of<br>
all&nbsp;timepoints&nbsp;in&nbsp;a&nbsp;period&nbsp;are&nbsp;more&nbsp;than&nbsp;1&nbsp;percent&nbsp;different&nbsp;than<br>
the&nbsp;expected&nbsp;number&nbsp;of&nbsp;hours.<br>
&nbsp;<br>
Example&nbsp;1:&nbsp;The&nbsp;month&nbsp;of&nbsp;January&nbsp;is&nbsp;described&nbsp;by&nbsp;two&nbsp;timeseries:&nbsp;one<br>
to&nbsp;represent&nbsp;a&nbsp;median&nbsp;load&nbsp;day&nbsp;(example&nbsp;1)&nbsp;and&nbsp;one&nbsp;to&nbsp;represent&nbsp;a<br>
peak&nbsp;day&nbsp;(example&nbsp;2).&nbsp;In&nbsp;these&nbsp;examples,&nbsp;the&nbsp;timeseries&nbsp;for&nbsp;the<br>
median&nbsp;load&nbsp;day&nbsp;has&nbsp;a&nbsp;much&nbsp;larger&nbsp;weight&nbsp;than&nbsp;the&nbsp;timeseries&nbsp;for&nbsp;the<br>
peak&nbsp;load&nbsp;day.<br>
&nbsp;<br>
January&nbsp;median&nbsp;timeseries:&nbsp;A&nbsp;timeseries&nbsp;describing&nbsp;a&nbsp;median&nbsp;day&nbsp;in<br>
January&nbsp;is&nbsp;composed&nbsp;of&nbsp;6&nbsp;timepoints,&nbsp;each&nbsp;representing&nbsp;a&nbsp;4-hour<br>
block.&nbsp;This&nbsp;is&nbsp;scaled&nbsp;up&nbsp;by&nbsp;factor&nbsp;of&nbsp;30&nbsp;to&nbsp;represent&nbsp;all&nbsp;but&nbsp;1&nbsp;day<br>
in&nbsp;January,&nbsp;then&nbsp;scaled&nbsp;up&nbsp;by&nbsp;a&nbsp;factor&nbsp;of&nbsp;10&nbsp;to&nbsp;represent&nbsp;all<br>
Januaries&nbsp;in&nbsp;a&nbsp;10-year&nbsp;period.<br>
*&nbsp;ts_num_tps&nbsp;=&nbsp;6&nbsp;tp/ts<br>
*&nbsp;ts_duration_of_tp&nbsp;=&nbsp;4&nbsp;hr/tp<br>
*&nbsp;ts_duration_hrs&nbsp;=&nbsp;24&nbsp;hr/ts<br>
&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;6&nbsp;tp/ts&nbsp;*&nbsp;4&nbsp;hr/tp<br>
*&nbsp;ts_scale_to_period&nbsp;=&nbsp;300&nbsp;ts/period<br>
&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;1&nbsp;ts/24&nbsp;hr&nbsp;*&nbsp;24&nbsp;hr/day&nbsp;*&nbsp;30&nbsp;day/yr&nbsp;*&nbsp;10&nbsp;yr/period<br>
&nbsp;&nbsp;&nbsp;&nbsp;24&nbsp;hr/day&nbsp;is&nbsp;a&nbsp;conversion&nbsp;factor.&nbsp;30&nbsp;day/yr&nbsp;indicates&nbsp;this<br>
&nbsp;&nbsp;&nbsp;&nbsp;timeseries&nbsp;is&nbsp;meant&nbsp;to&nbsp;represent&nbsp;30&nbsp;days&nbsp;out&nbsp;of&nbsp;every&nbsp;year.&nbsp;If<br>
&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;represented&nbsp;every&nbsp;day&nbsp;in&nbsp;January&nbsp;instead&nbsp;of&nbsp;all&nbsp;but&nbsp;one&nbsp;day,<br>
&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;term&nbsp;would&nbsp;be&nbsp;31&nbsp;day/hr.<br>
*&nbsp;tp_weight[t]&nbsp;=&nbsp;1200&nbsp;hr/period<br>
&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;4&nbsp;hr/tp&nbsp;*&nbsp;1&nbsp;tp/ts&nbsp;*&nbsp;300&nbsp;ts/period<br>
&nbsp;<br>
January&nbsp;peak&nbsp;timeseries:&nbsp;This&nbsp;timeseries&nbsp;describing&nbsp;a&nbsp;peak&nbsp;day&nbsp;in<br>
January&nbsp;is&nbsp;also&nbsp;composed&nbsp;of&nbsp;6&nbsp;timepoints,&nbsp;each&nbsp;representing&nbsp;a&nbsp;4-hour<br>
block.&nbsp;This&nbsp;is&nbsp;scaled&nbsp;up&nbsp;by&nbsp;factor&nbsp;of&nbsp;1&nbsp;to&nbsp;represent&nbsp;a&nbsp;single&nbsp;peak<br>
day&nbsp;of&nbsp;the&nbsp;month&nbsp;January,&nbsp;then&nbsp;scaled&nbsp;up&nbsp;by&nbsp;a&nbsp;factor&nbsp;of&nbsp;10&nbsp;to<br>
represent&nbsp;all&nbsp;peak&nbsp;January&nbsp;days&nbsp;in&nbsp;a&nbsp;10-year&nbsp;period.<br>
*&nbsp;ts_num_tps&nbsp;=&nbsp;6&nbsp;tp/ts<br>
*&nbsp;ts_duration_of_tp&nbsp;=&nbsp;4&nbsp;hr/tp<br>
*&nbsp;ts_duration_hrs&nbsp;=&nbsp;24&nbsp;hr/ts<br>
&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;6&nbsp;tp/ts&nbsp;*&nbsp;4&nbsp;hr/tp<br>
*&nbsp;ts_scale_to_period&nbsp;=&nbsp;10&nbsp;ts/period<br>
&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;1&nbsp;ts/24&nbsp;hr&nbsp;*&nbsp;24&nbsp;hr/day&nbsp;*&nbsp;1&nbsp;day/yr&nbsp;*&nbsp;10&nbsp;yr/period<br>
&nbsp;&nbsp;&nbsp;&nbsp;24&nbsp;hr/day&nbsp;is&nbsp;a&nbsp;conversion&nbsp;factor.&nbsp;1&nbsp;day/yr&nbsp;indicates&nbsp;this<br>
&nbsp;&nbsp;&nbsp;&nbsp;timeseries&nbsp;is&nbsp;meant&nbsp;to&nbsp;represent&nbsp;a&nbsp;single&nbsp;day&nbsp;out&nbsp;of&nbsp;the&nbsp;year.<br>
*&nbsp;tp_weight[t]&nbsp;=&nbsp;40&nbsp;hr/period<br>
&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;4&nbsp;hr/tp&nbsp;*&nbsp;1&nbsp;tp/ts&nbsp;*&nbsp;10&nbsp;ts/period<br>
&nbsp;<br>
Example&nbsp;2:&nbsp;The&nbsp;month&nbsp;of&nbsp;July&nbsp;is&nbsp;described&nbsp;by&nbsp;one&nbsp;timeseries&nbsp;that<br>
represents&nbsp;an&nbsp;entire&nbsp;week&nbsp;because&nbsp;July&nbsp;is&nbsp;a&nbsp;high-stress&nbsp;period&nbsp;for<br>
the&nbsp;grid&nbsp;and&nbsp;needs&nbsp;more&nbsp;time&nbsp;resolution&nbsp;to&nbsp;capture&nbsp;capacity&nbsp;and<br>
storage&nbsp;requirements.<br>
&nbsp;<br>
This&nbsp;timeseries&nbsp;describing&nbsp;7&nbsp;days&nbsp;in&nbsp;July&nbsp;is&nbsp;composed&nbsp;of&nbsp;84<br>
timepoints,&nbsp;each&nbsp;representing&nbsp;2&nbsp;hour&nbsp;blocks.&nbsp;These&nbsp;are&nbsp;scaled&nbsp;up&nbsp;to<br>
represent&nbsp;all&nbsp;31&nbsp;days&nbsp;of&nbsp;July,&nbsp;then&nbsp;scaled&nbsp;by&nbsp;another&nbsp;factor&nbsp;of&nbsp;10<br>
to&nbsp;represent&nbsp;a&nbsp;10-year&nbsp;period.<br>
*&nbsp;ts_num_tps&nbsp;=&nbsp;84&nbsp;tp/ts<br>
*&nbsp;ts_duration_of_tp&nbsp;=&nbsp;2&nbsp;hr/tp<br>
*&nbsp;ts_duration_hrs&nbsp;=&nbsp;168&nbsp;hr/ts<br>
&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;84&nbsp;tp/ts&nbsp;*&nbsp;2&nbsp;hr/tp<br>
*&nbsp;ts_scale_to_period&nbsp;=&nbsp;44.29&nbsp;ts/period<br>
&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;1&nbsp;ts/168&nbsp;hr&nbsp;*&nbsp;24&nbsp;hr/day&nbsp;*&nbsp;31&nbsp;days/yr&nbsp;*&nbsp;10&nbsp;yr/period<br>
&nbsp;&nbsp;&nbsp;&nbsp;24&nbsp;hr/day&nbsp;is&nbsp;a&nbsp;conversion&nbsp;factor.&nbsp;31&nbsp;day/yr&nbsp;indicates&nbsp;this<br>
&nbsp;&nbsp;&nbsp;&nbsp;timeseries&nbsp;is&nbsp;meant&nbsp;to&nbsp;represent&nbsp;31&nbsp;days&nbsp;out&nbsp;of&nbsp;every&nbsp;year&nbsp;(31<br>
&nbsp;&nbsp;&nbsp;&nbsp;days&nbsp;=&nbsp;duration&nbsp;of&nbsp;July).<br>
*&nbsp;tp_weight[t]&nbsp;=&nbsp;88.58&nbsp;hr/period<br>
&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;2&nbsp;hr/tp&nbsp;*&nbsp;1&nbsp;tp/ts&nbsp;*&nbsp;44.29&nbsp;ts/period<br>
&nbsp;<br>
Example&nbsp;3:&nbsp;The&nbsp;windy&nbsp;season&nbsp;of&nbsp;March&nbsp;&amp;&nbsp;April&nbsp;are&nbsp;described&nbsp;with&nbsp;a<br>
single&nbsp;timeseries&nbsp;spanning&nbsp;3&nbsp;days&nbsp;because&nbsp;this&nbsp;is&nbsp;a&nbsp;low-stress<br>
period&nbsp;on&nbsp;the&nbsp;grid&nbsp;with&nbsp;surplus&nbsp;wind&nbsp;power&nbsp;and&nbsp;frequent<br>
curtailments.<br>
&nbsp;<br>
This&nbsp;timeseries&nbsp;describing&nbsp;3&nbsp;days&nbsp;in&nbsp;Spring&nbsp;is&nbsp;composted&nbsp;of&nbsp;72<br>
timepoints,&nbsp;each&nbsp;representing&nbsp;1&nbsp;hour.&nbsp;The&nbsp;timeseries&nbsp;is&nbsp;scaled&nbsp;up&nbsp;by<br>
a&nbsp;factor&nbsp;of&nbsp;21.3&nbsp;to&nbsp;represent&nbsp;the&nbsp;61&nbsp;days&nbsp;of&nbsp;March&nbsp;and&nbsp;April,&nbsp;then<br>
scaled&nbsp;by&nbsp;another&nbsp;factor&nbsp;of&nbsp;10&nbsp;to&nbsp;represent&nbsp;a&nbsp;10-year&nbsp;period.<br>
*&nbsp;ts_num_tps&nbsp;=&nbsp;72&nbsp;tp/ts<br>
*&nbsp;ts_duration_of_tp&nbsp;=&nbsp;1&nbsp;hr/tp<br>
*&nbsp;ts_duration_hrs&nbsp;=&nbsp;72&nbsp;hr/ts<br>
&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;72&nbsp;tp/ts&nbsp;*&nbsp;1&nbsp;hr/tp<br>
*&nbsp;ts_scale_to_period&nbsp;=&nbsp;203.3&nbsp;ts/period<br>
&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;1&nbsp;ts/72&nbsp;hr&nbsp;*&nbsp;24&nbsp;hr/day&nbsp;*&nbsp;61&nbsp;days/yr&nbsp;*&nbsp;10&nbsp;yr/period<br>
&nbsp;&nbsp;&nbsp;&nbsp;24&nbsp;hr/day&nbsp;is&nbsp;a&nbsp;conversion&nbsp;factor.&nbsp;6a&nbsp;day/yr&nbsp;indicates&nbsp;this<br>
&nbsp;&nbsp;&nbsp;&nbsp;timeseries&nbsp;is&nbsp;meant&nbsp;to&nbsp;represent&nbsp;61&nbsp;days&nbsp;out&nbsp;of&nbsp;every&nbsp;year&nbsp;(31<br>
&nbsp;&nbsp;&nbsp;&nbsp;days&nbsp;in&nbsp;March&nbsp;+&nbsp;30&nbsp;days&nbsp;in&nbsp;April).<br>
*&nbsp;tp_weight[t]&nbsp;=&nbsp;203.3&nbsp;hr/period<br>
&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;1&nbsp;hr/tp&nbsp;*&nbsp;1&nbsp;tp/ts&nbsp;*&nbsp;203.3&nbsp;ts/period<br>
&nbsp;<br>
EXAMPLE<br>
&gt;&gt;&gt;&nbsp;from&nbsp;switch_mod.utilities&nbsp;import&nbsp;define_AbstractModel<br>
&gt;&gt;&gt;&nbsp;model&nbsp;=&nbsp;define_AbstractModel('timescales')<br>
&gt;&gt;&gt;&nbsp;if&nbsp;hasattr(model,&nbsp;'create_instance'):<br>
...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance&nbsp;=&nbsp;model.create_instance('test_dat/timescales.dat')<br>
...&nbsp;else:<br>
...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance&nbsp;=&nbsp;model.create('test_dat/timescales.dat')<br>
&gt;&gt;&gt;&nbsp;if&nbsp;hasattr(model,&nbsp;'create_instance'):<br>
...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance&nbsp;=&nbsp;model.create_instance('test_dat/timescales_bad_weights.dat')<br>
...&nbsp;else:<br>
...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance&nbsp;=&nbsp;model.create('test_dat/timescales_bad_weights.dat')<br>
Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):<br>
&nbsp;&nbsp;&nbsp;&nbsp;...<br>
ValueError:&nbsp;BuildCheck&nbsp;'validate_time_weights'&nbsp;identified&nbsp;error&nbsp;with&nbsp;index&nbsp;'2020'</tt></dd></dl>
 <dl><dt><a name="-load_inputs"><strong>load_inputs</strong></a>(mod, switch_data, inputs_dir)</dt><dd><tt>Import&nbsp;data&nbsp;for&nbsp;timescales&nbsp;from&nbsp;.tab&nbsp;files.&nbsp;&nbsp;The&nbsp;inputs_dir<br>
should&nbsp;contain&nbsp;the&nbsp;following&nbsp;files&nbsp;with&nbsp;these&nbsp;columns.&nbsp;The<br>
columns&nbsp;may&nbsp;be&nbsp;in&nbsp;any&nbsp;order&nbsp;and&nbsp;extra&nbsp;columns&nbsp;will&nbsp;be&nbsp;ignored.<br>
&nbsp;<br>
periods.tab<br>
&nbsp;&nbsp;&nbsp;&nbsp;INVESTMENT_PERIOD,&nbsp;period_start,&nbsp;period_end<br>
&nbsp;<br>
timeseries.tab<br>
&nbsp;&nbsp;&nbsp;&nbsp;TIMESERIES,&nbsp;period,&nbsp;ts_duration_of_tp,&nbsp;ts_num_tps,<br>
&nbsp;&nbsp;&nbsp;&nbsp;ts_scale_to_period<br>
&nbsp;<br>
The&nbsp;order&nbsp;of&nbsp;rows&nbsp;in&nbsp;timepoints.tab&nbsp;indicates&nbsp;the&nbsp;order&nbsp;of&nbsp;the<br>
timepoints&nbsp;per&nbsp;Pyomo&nbsp;and&nbsp;AMPL&nbsp;convention.&nbsp;To&nbsp;maintain&nbsp;your&nbsp;sanity,<br>
we&nbsp;highly&nbsp;recommend&nbsp;that&nbsp;you&nbsp;sort&nbsp;your&nbsp;input&nbsp;file&nbsp;chronologically&nbsp;by<br>
timestamp.&nbsp;Note:&nbsp;timestamp&nbsp;is&nbsp;solely&nbsp;used&nbsp;as&nbsp;a&nbsp;label&nbsp;and&nbsp;be&nbsp;in&nbsp;any<br>
format.<br>
&nbsp;<br>
timepoints.tab<br>
&nbsp;&nbsp;&nbsp;&nbsp;timepoint_id,&nbsp;timestamp,&nbsp;timeseries<br>
&nbsp;<br>
EXAMPLE:<br>
&gt;&gt;&gt;&nbsp;from&nbsp;switch_mod.utilities&nbsp;import&nbsp;define_AbstractModel<br>
&gt;&gt;&gt;&nbsp;model&nbsp;=&nbsp;define_AbstractModel('timescales')<br>
&gt;&gt;&gt;&nbsp;instance&nbsp;=&nbsp;model.<a href="#-load_inputs">load_inputs</a>(inputs_dir='test_dat')<br>
&gt;&gt;&gt;&nbsp;instance.tp_weight_in_year.pprint()<br>
tp_weight_in_year&nbsp;:&nbsp;Size=7,&nbsp;Index=TIMEPOINTS,&nbsp;Domain=PositiveReals,&nbsp;Default=None,&nbsp;Mutable=False<br>
&nbsp;&nbsp;&nbsp;&nbsp;Key&nbsp;:&nbsp;Value<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;:&nbsp;1095.744<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;:&nbsp;1095.744<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;:&nbsp;1095.744<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;:&nbsp;1095.744<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;:&nbsp;&nbsp;&nbsp;2191.5<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;:&nbsp;&nbsp;&nbsp;2191.5<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7&nbsp;:&nbsp;&nbsp;&nbsp;8766.0</tt></dd></dl>
</td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>Any</strong> = &lt;Plugin _AnySet 'Any'&gt;<br>
<strong>AnyWithNone</strong> = &lt;Plugin _AnySetWithNone 'AnyWithNone'&gt;<br>
<strong>Binary</strong> = &lt;Plugin BooleanSet 'Binary'&gt;<br>
<strong>Boolean</strong> = &lt;Plugin BooleanSet 'Boolean'&gt;<br>
<strong>DataManagerFactory</strong> = &lt;pyutilib.misc.method.new object&gt;<br>
<strong>Integers</strong> = &lt;Plugin IntegerSet 'Integers'&gt;<br>
<strong>ModelComponentFactory</strong> = &lt;pyutilib.component.core.core.PluginFactoryFunctor object&gt;<br>
<strong>NegativeIntegers</strong> = &lt;Plugin IntegerSet 'NegativeIntegers'&gt;<br>
<strong>NegativeReals</strong> = &lt;Plugin RealSet 'NegativeReals'&gt;<br>
<strong>NonNegativeIntegers</strong> = &lt;Plugin IntegerSet 'NonNegativeIntegers'&gt;<br>
<strong>NonNegativeReals</strong> = &lt;Plugin RealSet 'NonNegativeReals'&gt;<br>
<strong>NonPositiveIntegers</strong> = &lt;Plugin IntegerSet 'NonPositiveIntegers'&gt;<br>
<strong>NonPositiveReals</strong> = &lt;Plugin RealSet 'NonPositiveReals'&gt;<br>
<strong>ParamRepresentationFactory</strong> = &lt;pyutilib.component.core.core.PluginFactoryFunctor object&gt;<br>
<strong>PercentFraction</strong> = &lt;Plugin RealSet 'PercentFraction'&gt;<br>
<strong>PositiveIntegers</strong> = &lt;Plugin IntegerSet 'PositiveIntegers'&gt;<br>
<strong>PositiveReals</strong> = &lt;Plugin RealSet 'PositiveReals'&gt;<br>
<strong>Reals</strong> = &lt;Plugin RealSet 'Reals'&gt;<br>
<strong>SolverFactory</strong> = &lt;pyutilib.misc.method.new object&gt;<br>
<strong>SolverManagerFactory</strong> = &lt;pyutilib.component.core.core.PluginFactoryFunctor object&gt;<br>
<strong>TransformationFactory</strong> = &lt;pyutilib.component.core.core.PluginFactoryFunctor object&gt;<br>
<strong>UnitInterval</strong> = &lt;Plugin RealSet 'PercentFraction'&gt;<br>
<strong>hours_per_year</strong> = 8766<br>
<strong>maximize</strong> = -1<br>
<strong>minimize</strong> = 1</td></tr></table>
</body></html>